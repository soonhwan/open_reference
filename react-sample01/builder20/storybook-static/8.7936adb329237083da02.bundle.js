(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{1383:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var C_work_react_sample01_builder20_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(65),C_work_react_sample01_builder20_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(11),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__),hooks__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(5),components__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(1),utils__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(2),_constants__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(12),store_modules_base__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(32),store_modules_display_displayProduct__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(569),listIdConstant={Complete:{starscore:"RNK050070003",recent:"RNK050070002",popular:"RNK050700001"},WeekDay:{recent:"RNK05060000",starscore:"RNK05060001",popular:"RNK05060004"}},menuList=[{text:"일",value:1},{text:"월",value:2},{text:"화",value:3},{text:"수",value:4},{text:"목",value:5},{text:"금",value:6},{text:"토",value:7},{text:"완결",value:8}],sortList=[{value:"recent",text:"최신순"},{value:"popular",text:"인기순"},{value:"starscore",text:"평점순"}];__webpack_exports__.default=function DisplayDailyPage(){var dispatch=Object(hooks__WEBPACK_IMPORTED_MODULE_3__.c)(),displayProduct=Object(hooks__WEBPACK_IMPORTED_MODULE_3__.j)((function(state){return{displayProduct:state.displayProduct}}),hooks__WEBPACK_IMPORTED_MODULE_3__.a).displayProduct,_useState=Object(hooks__WEBPACK_IMPORTED_MODULE_3__.k)(utils__WEBPACK_IMPORTED_MODULE_5__.default.getOnestoreBookDayOfWeek(new Date)),_useState2=Object(C_work_react_sample01_builder20_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(_useState,2),selectedDay=_useState2[0],setSelectedDay=_useState2[1],_useState3=Object(hooks__WEBPACK_IMPORTED_MODULE_3__.k)(8===selectedDay?"starscore":"recent"),_useState4=Object(C_work_react_sample01_builder20_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(_useState3,2),sortType=_useState4[0],setSortType=_useState4[1],getListIdByDaily=Object(hooks__WEBPACK_IMPORTED_MODULE_3__.b)((function(){var listId,dayCode=arguments.length>0&&void 0!==arguments[0]?arguments[0]:selectedDay,sort=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sortType;return sort="recent",8===(dayCode=2)?(listId=listIdConstant.Complete[sort],utils__WEBPACK_IMPORTED_MODULE_5__.default.isEmpty(listId)&&(listId=listIdConstant.Complete.starscore)):(listId=listIdConstant.WeekDay[sort]+"".concat(dayCode-1),utils__WEBPACK_IMPORTED_MODULE_5__.default.isEmpty(listId)&&(listId=listIdConstant.WeekDay.recent)),{listId:listId,rest:{dayCode:dayCode,sort:sort,compYn:8===selectedDay?"Y":"N",startKey:displayProduct.startKey}}}),[selectedDay,sortType]),getProductList=Object(hooks__WEBPACK_IMPORTED_MODULE_3__.b)((function(changedParam){var bPaging=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log("API ::: searchDailyProductList");var basicParam={menuId:"DP26",freepassGrpCd:"",excludeKtoonYn:"Y"},_getListIdByDaily=getListIdByDaily(null==changedParam?void 0:changedParam.dayCode,null==changedParam?void 0:changedParam.sort),listId=_getListIdByDaily.listId,rest=_getListIdByDaily.rest,param=Object(C_work_react_sample01_builder20_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)({},basicParam,{},rest);bPaging?dispatch(store_modules_display_displayProduct__WEBPACK_IMPORTED_MODULE_8__.getDisplayProductPaging(listId,param)).then((function(res){})):(dispatch(store_modules_base__WEBPACK_IMPORTED_MODULE_7__.setScreenLoading(!0)),dispatch(store_modules_display_displayProduct__WEBPACK_IMPORTED_MODULE_8__.getDisplayProduct(listId,param)).then((function(res){dispatch(store_modules_base__WEBPACK_IMPORTED_MODULE_7__.setScreenLoading(!1))})))}),[dispatch,getListIdByDaily]);Object(react__WEBPACK_IMPORTED_MODULE_2__.useEffect)((function(){getProductList()}),[getProductList]);var getProductListPaing=Object(hooks__WEBPACK_IMPORTED_MODULE_3__.b)((function(param){getProductList(param,!0)}),[getProductList]);Object(hooks__WEBPACK_IMPORTED_MODULE_3__.e)((function(){function onScroll(){window.pageYOffset+document.documentElement.clientHeight>document.documentElement.scrollHeight-300&&displayProduct.hasNext&&!displayProduct.isLoading&&getProductListPaing()}return window.addEventListener("scroll",onScroll),function(){window.removeEventListener("scroll",onScroll)}}),[displayProduct,getProductListPaing]);var changeDaily=Object(hooks__WEBPACK_IMPORTED_MODULE_3__.b)((function(eventData){console.log("EVENT ::: changeDaily"),setSelectedDay(eventData.value)}),[]),changeSort=Object(hooks__WEBPACK_IMPORTED_MODULE_3__.b)((function(eventData){console.log("EVENT ::: changeSort"),setSortType(eventData.value)}),[]),clickDailyItem=Object(hooks__WEBPACK_IMPORTED_MODULE_3__.b)((function(eventData){console.log("EVENT ::: clickDailyItem ==> ",eventData.prodId)}),[]),handleEvent=Object(hooks__WEBPACK_IMPORTED_MODULE_3__.b)((function(eventName,eventData,event){switch(eventName){case"change_PrimaryBar":changeDaily(eventData);break;case"change_SortingBar_item":changeSort(eventData);break;case"click_ItemRenderer":clickDailyItem(eventData)}}),[changeDaily,changeSort,clickDailyItem]),getListRender=Object(hooks__WEBPACK_IMPORTED_MODULE_3__.b)((function(){return displayProduct.productList.length>0?react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(components__WEBPACK_IMPORTED_MODULE_4__.List,{mode:"list",itemRenderer:"default1Row",infoList:displayProduct.productList,onEvent:handleEvent}):displayProduct.isLoading?null:react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(components__WEBPACK_IMPORTED_MODULE_4__.ListNoResults,{mode:"basic",thumb:"/static/images/thumb/list_no_results_01.png",title:"결과가 존재하지 않습니다."})}),[displayProduct.isLoading,displayProduct.productList,handleEvent]),getTotalCount=Object(hooks__WEBPACK_IMPORTED_MODULE_3__.b)((function(){return"총 ".concat(displayProduct.productList.length,"권")}),[displayProduct]),helmet=Object(hooks__WEBPACK_IMPORTED_MODULE_3__.f)((function(){return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(components__WEBPACK_IMPORTED_MODULE_4__.BooksHelmet,null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("title",null,"unknown"),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("meta",{name:"keywords",content:"unknown, 북스, 오디오북"}),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("meta",{name:"description",content:"할인혜택이 가장 많은 국내 1위 eBook 서비스 도서, 장르소설, 웹소설, 만화, 웹툰을 한곳에서 이용하세요."}))}),[]);return _constants__WEBPACK_IMPORTED_MODULE_6__.logConfig.render&&console.log("%r DisplayDailyPage"),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(components__WEBPACK_IMPORTED_MODULE_4__.SubTemplate,null,helmet,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div",{className:"DisplayDailyPage"},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(components__WEBPACK_IMPORTED_MODULE_4__.Lnb,{lnbTitle:"오늘의 웹툰"}),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(components__WEBPACK_IMPORTED_MODULE_4__.PrimaryBar,{mode:"landingNav",itemList:menuList,selectedItemValue:selectedDay,onEvent:handleEvent}),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(components__WEBPACK_IMPORTED_MODULE_4__.SortingBar,{mode:"basic",title:getTotalCount(),itemList:sortList,selectedItemValue:sortType,onEvent:handleEvent}),getListRender()))}}}]);
//# sourceMappingURL=8.7936adb329237083da02.bundle.js.map